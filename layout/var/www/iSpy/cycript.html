<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="/css/cycript.css">
        <script type="text/javascript" src="/js/jquery.min.js"></script>
    </head>
    <body spellcheck="false">
         <main id="wrapper"></main>
    </body>
    <script type="text/javascript" src="/js/cycript/ext.js"></script>
    <script type="text/javascript" src="/js/cycript/main.js"></script>
    <script>
        /*
         * This is a just some test code to enable cross-frame communication
         * since we may want to talk to the cycript WebSocket from the main ui
         */
        var addEvent = (function () {
          if (document.addEventListener) {
            return function (el, type, fn) {
              if (el && el.nodeName || el === window) {
                el.addEventListener(type, fn, false);
              } else if (el && el.length) {
                for (var i = 0; i < el.length; i++) {
                  addEvent(el[i], type, fn);
                }
              }
            };
          } else {
            return function (el, type, fn) {
              if (el && el.nodeName || el === window) {
                el.attachEvent('on' + type, function () { return fn.call(el, window.event); });
              } else if (el && el.length) {
                for (var i = 0; i < el.length; i++) {
                  addEvent(el[i], type, fn);
                }
              }
            };
          }
        })();
        addEvent(window, "message", function(msg) {
            if (msg.origin !== window.location.origin) {
                console.log('[Cycript|PostMessage] Ignoring message from: ' + msg.origin);
            } else {
                console.log('[Cycript|PostMessage] Got message:');
                console.log(msg);
            }
        });
    </script>
</html>